/*
 Swipebox v1.2.9 | Constantin Saguin csag.co | MIT License | github.com/brutaldesign/swipebox */
(function(c,l,b,n){b.swipebox=function(h,x){var k,y={useCSS:!0,useSVG:!0,initialIndexOnArray:0,closeBySwipe:!0,hideBarsOnMobile:!0,hideBarsDelay:3E3,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterOpen:null,afterClose:null},f=this,g=[],p,q=h.selector,z=b(q),r=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),t=null!==r||l.createTouch!==n||"ontouchstart"in c||"onmsgesturechange"in c||navigator.msMaxTouchPoints,
A=!!l.createElementNS&&!!l.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,u=c.innerWidth?c.innerWidth:b(c).width(),v=c.innerHeight?c.innerHeight:b(c).height();f.settings={};f.init=function(){f.settings=b.extend({},y,x);if(b.isArray(h))g=h,k.target=b(c),k.init(f.settings.initialIndexOnArray);else b(l).on("click",q,function(a){if("slide current"===a.target.parentNode.className)return!1;b.isArray(h)||(k.destroy(),p=b(q),k.actions());g=[];var d,e;e||(d="data-rel",e=b(this).attr(d));
e||(d="rel",e=b(this).attr(d));p=e&&""!==e&&"nofollow"!==e?z.filter("["+d+'="'+e+'"]'):b(q);p.each(function(){var a=null,d=null,e=null,c=null,f=null,m=null,w=null,h=null;b(this).attr("title")&&(w=b(this).attr("title"));b(this).attr("data-author-username")&&(a=b(this).attr("data-author-image"));b(this).attr("data-author-username")&&(d=b(this).attr("data-author-username"));b(this).attr("data-likes-count")&&(e=b(this).attr("data-likes-count"));b(this).attr("data-link")&&(c=b(this).attr("data-link"));
b(this).attr("data-show-likes")&&(f=b(this).attr("data-show-likes"));b(this).attr("data-show-author")&&(m=b(this).attr("data-show-author"));b(this).attr("href")&&(h=b(this).attr("href"));g.push({href:h,title:w,author_image:a,author_username:d,likes_count:e,data_link:c,show_author:m,show_likes:f})});d=p.index(b(this));a.preventDefault();a.stopPropagation();k.target=b(a.target);k.init(d)})};k={init:function(a){f.settings.beforeOpen&&f.settings.beforeOpen();this.target.trigger("swipebox-start");b.swipebox.isOpen=
!0;this.build();this.openSlide(a);this.openMedia(a);this.preloadMedia(a+1);this.preloadMedia(a-1);f.settings.afterOpen&&f.settings.afterOpen()},build:function(){var a;b("body").append('<div id="swipebox-overlay"><div id="swipebox-slider"></div> <div id="swipebox-caption"></div><div id="swipebox-action"><a id="swipebox-close"></a><div id="swipebox_author"></div><a id="swipebox-prev"></a><a id="swipebox-next"></a></div></div>');this.doCssTrans()&&(b("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease",
"-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),b("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),b("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"}));
A&&!0===f.settings.useSVG&&(a=b("#swipebox-action #swipebox-close").css("background-image"),a=a.replace("png","svg"),b("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":a}));r&&!0===f.settings.hideBarsOnMobile&&b("#swipebox-action, #swipebox-caption").hide();b.each(g,function(){b("#swipebox-slider").append('<div class="slide"></div>')});this.setDim();this.actions();t&&this.gesture();this.keyboard();this.animBars();this.resize()},
setDim:function(){var a,d,e={};"onorientationchange"in c?c.addEventListener("orientationchange",function(){if(0===c.orientation)a=u,d=v;else if(90===c.orientation||-90===c.orientation)a=v,d=u},!1):(a=c.innerWidth?c.innerWidth:b(c).width(),d=c.innerHeight?c.innerHeight:b(c).height());e={width:a,height:d};b("#swipebox-overlay").css(e)},resize:function(){var a=this;b(c).resize(function(){a.setDim()}).resize()},supportTransition:function(){var a="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),
b;for(b=0;b<a.length;b++)if(l.createElement("div").style[a[b]]!==n)return a[b];return!1},doCssTrans:function(){if(f.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var a=this,d=null,e=null,c=!1,g,h,k={},l=b("#swipebox-caption, #swipebox-action"),m=b("#swipebox-slider");l.addClass("visible-bars");a.setTimeout();b("body").bind("touchstart",function(a){b(this).addClass("touching");k=a.originalEvent.targetTouches[0];g=a.originalEvent.targetTouches[0].pageX;h=a.originalEvent.targetTouches[0].pageY;
b(".touching").bind("touchmove",function(a){a.preventDefault();a.stopPropagation();k=a.originalEvent.targetTouches[0];f.settings.closeBySwipe&&(e=k.pageY-h,50<=Math.abs(e)||c)&&(a=.75-Math.abs(e)/m.height(),m.css({top:e+"px"}),m.css({opacity:a}),c=!0)});return!1}).bind("touchend",function(h){h.preventDefault();h.stopPropagation();if(f.settings.closeBySwipe&&(.5>=m.css("opacity")?(h=0<e?m.height():-m.height(),m.animate({top:h+"px",opacity:0},300,function(){a.closeSlide()})):m.animate({top:0,opacity:1},
300),c)){c=!1;return}d=k.pageX-g;10<=d?a.getPrev():-10>=d?a.getNext():l.hasClass("visible-bars")?(a.clearTimeout(),a.hideBars()):(a.showBars(),a.setTimeout());b(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(0<f.settings.hideBarsDelay){var a=this;a.clearTimeout();a.timeout=c.setTimeout(function(){a.hideBars()},f.settings.hideBarsDelay)}},clearTimeout:function(){c.clearTimeout(this.timeout);this.timeout=null},showBars:function(){var a=b("#swipebox-caption, #swipebox-action");
this.doCssTrans()?a.addClass("visible-bars"):(b("#swipebox-caption").animate({top:0},500),b("#swipebox-action").animate({bottom:0},500),setTimeout(function(){a.addClass("visible-bars")},1E3))},hideBars:function(){var a=b("#swipebox-caption, #swipebox-action");this.doCssTrans()?a.removeClass("visible-bars"):(b("#swipebox-caption").animate({top:"-50px"},500),b("#swipebox-action").animate({bottom:"-50px"},500),setTimeout(function(){a.removeClass("visible-bars")},1E3))},animBars:function(){var a=this,
d=b("#swipebox-caption, #swipebox-action");d.addClass("visible-bars");a.setTimeout();b("#swipebox-slider").click(function(){d.hasClass("visible-bars")||(a.showBars(),a.setTimeout())});b("#swipebox-action").hover(function(){a.showBars();d.addClass("visible-bars");a.clearTimeout()},function(){d.removeClass("visible-bars");a.setTimeout()})},keyboard:function(){var a=this;b(c).bind("keyup",function(b){b.preventDefault();b.stopPropagation();37===b.keyCode?a.getPrev():39===b.keyCode?a.getNext():27===b.keyCode&&
a.closeSlide()})},actions:function(){var a=this;2>g.length?b("#swipebox-prev, #swipebox-next").hide():(b("#swipebox-prev").bind("touchend click",function(b){b.preventDefault();b.stopPropagation();a.getPrev();a.setTimeout()}),b("#swipebox-next").bind("touchend click",function(b){b.preventDefault();b.stopPropagation();a.getNext();a.setTimeout()}));b("#swipebox-close").bind("touchend click",function(){a.closeSlide()})},setSlide:function(a,d){d=d||!1;var e=b("#swipebox-slider");this.doCssTrans()?e.css({left:100*
-a+"%"}):e.animate({left:100*-a+"%"});b("#swipebox-slider .slide").removeClass("current");b("#swipebox-slider .slide").eq(a).addClass("current");this.setTitle(a);d&&e.fadeIn();b("#swipebox-prev, #swipebox-next").removeClass("disabled");0===a?b("#swipebox-prev").addClass("disabled"):a===g.length-1&&b("#swipebox-next").addClass("disabled")},openSlide:function(a){b("html").addClass("swipebox-html");t&&b("html").addClass("swipebox-touch");b(c).trigger("resize");this.setSlide(a,!0)},preloadMedia:function(a){var b=
this,e=null;g[a]!==n&&(e=g[a].href);b.isVideo(e)?b.openMedia(a):setTimeout(function(){b.openMedia(a)},1E3)},openMedia:function(a){var d=null;g[a]!==n&&(d=g[a].href);if(0>a||a>=g.length)return!1;this.isVideo(d)?b("#swipebox-slider .slide").eq(a).html(this.getVideo(d)):this.loadMedia(d,function(){b("#swipebox-slider .slide").eq(a).html(this)})},setTitle:function(a){var d=null,e=null,c=null,f=null,h=null,k=null,l=null;b("#swipebox-caption").empty();b("#swipebox_author").empty();g[a]!==n&&(d=g[a].title,
e=g[a].author_image,c=g[a].author_username,f=g[a].likes_count,h=g[a].data_link,k=g[a].show_author,l=g[a].show_likes);d&&b("#swipebox-caption").append(d);d=a="";"true"==l&&(a='<span id="likes_count"></span><span id="likes_count_text">'+f+"</span></a>");"true"==k&&(d='<a target="_blank" href="'+h+'"><a href="http://instagram.com/'+c+'" target="_blank"><span id="author_image"><img src="'+e+'" style="width:25px;border-radius:10px;"/></span><span id="author_username">'+c+"</span></a>");c&&b("#swipebox_author").html(a+
d)},isVideo:function(a){if(a&&(a.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||a.match(/vimeo\.com\/([0-9]*)/)||a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||a.match(/mp4/)))return!0},getVideo:function(a){var b="",c=a.match(/watch\?v=([a-zA-Z0-9\-_]+)/),h=a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/),g=a.match(/vimeo\.com\/([0-9]*)/);instagramUrl=a.match(/cdninstagram\.com\/([a-zA-Z0-9\-_\-.\--]+)\/([a-zA-Z0-9\-_\-.\--]+)/);c||h?(h&&(c=h),b='<iframe width="560" height="315" src="//www.youtube.com/embed/'+
c[1]+'" frameborder="0" allowfullscreen></iframe>'):g?b='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+g[1]+"?byline=0&amp;portrait=0&amp;color="+f.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':instagramUrl&&(b='<video id="inst_video" controls allowfullscreen>  <source src='+a+"> Your browser does not support HTML5 video</video>");return'<div class="swipebox-video-container" style="max-width:'+f.settings.videomaxWidth+
'px"><div class="swipebox-video;">'+b+"</div></div>"},loadMedia:function(a,c){if(!this.isVideo(a)){var d=b("<img>").on("load",function(){c.call(d)});d.attr("src",a)}},getNext:function(){var a=b("#swipebox-slider .slide").index(b("#swipebox-slider .slide.current"));a+1<g.length?(a++,this.setSlide(a),this.preloadMedia(a+1)):(b("#swipebox-slider").addClass("rightSpring"),setTimeout(function(){b("#swipebox-slider").removeClass("rightSpring")},500))},getPrev:function(){var a=b("#swipebox-slider .slide").index(b("#swipebox-slider .slide.current"));
0<a?(a--,this.setSlide(a),this.preloadMedia(a-1)):(b("#swipebox-slider").addClass("leftSpring"),setTimeout(function(){b("#swipebox-slider").removeClass("leftSpring")},500))},closeSlide:function(){b("html").removeClass("swipebox-html");b("html").removeClass("swipebox-touch");b(c).trigger("resize");this.destroy()},destroy:function(){b(c).unbind("keyup");b("body").unbind("touchstart");b("body").unbind("touchmove");b("body").unbind("touchend");b("#swipebox-slider").unbind();b("#swipebox-overlay").remove();
b.isArray(h)||h.removeData("_swipebox");this.target&&this.target.trigger("swipebox-destroy");b.swipebox.isOpen=!1;f.settings.afterClose&&f.settings.afterClose()}};f.init()};b.fn.swipebox=function(c){b.data(this,"_swipebox")||(c=new b.swipebox(this,c),this.data("_swipebox",c));return this.data("_swipebox")}})(window,document,jQuery);
