(function(h,l,t,v){function q(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}var r=h.event,n;var p=r.special.debouncedresize={setup:function(){h(this).on("resize",p.handler)},teardown:function(){h(this).off("resize",p.handler)},handler:function(a,b){var f=this,c=arguments,d=function(){a.type="debouncedresize";r.dispatch.apply(f,c)};n&&clearTimeout(n);b?d():n=setTimeout(d,p.threshold)},
threshold:100};Array.prototype.shuffle=function(){for(var a=this.length,b,f;a--;)b=Math.floor(Math.random()*a),f=this[a],this[a]=this[b],this[b]=f;return this};var u=h(l),m=l.Modernizr;h.GridRotator=function(a,b){this.$el=h(b);m.backgroundsize&&(this.$el.addClass("ri-grid-loading"),this._init(a))};h.GridRotator.defaults={rows:4,columns:10,margin:0,w1024:{rows:3,columns:8},w768:{rows:3,columns:7},w480:{rows:3,columns:5},w320:{rows:2,columns:4},w240:{rows:2,columns:3},step:"random",maxStep:3,preventClick:!0,
animType:"random",animSpeed:800,animEasingOut:"linear",animEasingIn:"linear",interval:3E3,slideshow:!0,onhover:!1,nochange:[],onDraw:function(){},heightToWidthRatio:1,subImg:!1};h.GridRotator.prototype={_init:function(a){this.options=h.extend(!0,{},h.GridRotator.defaults,a);this._config()},_config:function(){var a=this;this.supportTransitions=m.csstransitions;this.supportTransforms3D=m.csstransforms3d;this.transEndEventName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",
msTransition:"MSTransitionEnd",transition:"transitionend"}[m.prefixed("transition")]+".gridrotator";this.animTypes=this.supportTransforms3D?"fadeInOut slideLeft slideRight slideTop slideBottom rotateLeft rotateRight rotateTop rotateBottom scale rotate3d rotateLeftScale rotateRightScale rotateTopScale rotateBottomScale".split(" "):["fadeInOut","slideLeft","slideRight","slideTop","slideBottom"];this.animType=this.options.animType;"random"===this.animType||this.supportTransforms3D||-1!==h.inArray(this.animType,
this.animTypes)||"showHide"===this.animType||(this.animType="fadeInOut");this.animTypesTotal=this.animTypes.length;this.$list=this.$el.children("ul");this.$list.css("padding-left","0");var b=0,f=0,c=this.$list.find("img");this.$list.find("a");var d=c.length,e=["#D92727","#FFE433","#0DB8B5"];a.options.subImg&&h("<img/>").error(function(){a.options.subImg=!1}).attr("src",a.options.subImg);c.each(function(){var g=h(this),k=g.attr("src");h("<img/>").load(function(){++b;"yes"===g.parent().attr("data-video")?
(g.parent().parent().css("background-image","url("+GridRotator.pluginsUrl+"/enjoy-instagram-premium/icons/play_overlay.png)"),g.parent().parent().css("background-size","cover"),g.parent().css("background-image","url("+k+")"),g.parent().css("opacity","0.45"),console.log(g.parent().attr("href"))):g.parent().css("background-image","url("+k+")");b+f===d&&(c.remove(),a.$el.removeClass("ri-grid-loading"),a.$items=a.$list.children("li"),a.$itemsCache=a.$items.clone(),a.itemsTotal=a.$items.length,a.outItems=
[],a._layout(function(){a._initEvents()}),a._start())}).attr("src",k);h("<img/>").error(function(){++f;if(a.options.subImg)g.parent().css("background-image","url("+a.options.subImg+")");else{var h=Math.floor(3*Math.random());g.parent().css("background",e[h])}b+f===d&&(c.remove(),a.$el.removeClass("ri-grid-loading"),a.$items=a.$list.children("li"),a.$itemsCache=a.$items.clone(),a.itemsTotal=a.$items.length,a.outItems=[],a._layout(function(){a._initEvents()}),a._start())}).attr("src",k)})},_layout:function(a){var b=
this;this._setGridDim();this.$list.empty();this.$items=this.$itemsCache.clone().appendTo(this.$list);var f=this.$items.filter(":gt("+(this.showTotal-1)+")"),c=f.children("a");this.outItems.length=0;c.each(function(a){b.outItems.push(h(this))});f.remove();for(var c=document.defaultView?parseInt(document.defaultView.getComputedStyle(this.$el.get(0),null).width):this.$el.width(),f=Math.floor(c/this.columns),c=c-this.columns*Math.floor(f),d=0;d<this.rows;++d)for(var e=0;e<this.columns;++e){var g=this.columns*
d+e,k=this.$items.eq(g);k.css({width:e<Math.floor(c)?f+1:f,height:Math.floor(f*this.options.heightToWidthRatio),border:this.margin+"px solid white"});-1!==h.inArray(g,this.options.nochange)&&k.addClass("ri-nochange").data("nochange",!0)}if(this.options.preventClick)this.$items.children().css("cursor","default").on("click.gridrotator",!1);a&&a.call();this.options.onDraw.call(this)},_setGridDim:function(){var a=this.$el.width();switch(!0){case 240>a:this.rows=this.options.w240.rows;this.columns=this.options.w240.columns;
break;case 320>a:this.rows=this.options.w320.rows;this.columns=this.options.w320.columns;break;case 480>a:this.rows=this.options.w480.rows;this.columns=this.options.w480.columns;break;case 768>a:this.rows=this.options.w768.rows;this.columns=this.options.w768.columns;break;case 1024>a:this.rows=this.options.w1024.rows;this.columns=this.options.w1024.columns;break;default:this.rows=this.options.rows,this.columns=this.options.columns}this.showTotal=this.rows*this.columns;this.margin=this.options.margin},
_initEvents:function(){var a=this;u.on("debouncedresize.gridrotator",function(){a._layout()});var b=q();b&&(b=b.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(b,function(){a._visChange()}));if(!m.touch&&this.options.onhover)a.$items.on("mouseenter.gridrotator",function(){var b=h(this);b.data("active")||b.data("hovered")||b.data("nochange")||(b.data("hovered",!0),a._replace(b))}).on("mouseleave.gridrotator",function(){h(this).data("hovered",!1)})},_visChange:function(){var a=
(a=q())?document[a]:!1;a?clearTimeout(this.playtimeout):this._start()},_start:function(){this.showTotal<this.itemsTotal&&this.options.slideshow&&this._showNext()},_getAnimType:function(){return"random"===this.animType?this.animTypes[Math.floor(Math.random()*this.animTypesTotal)]:this.animType},_getAnimProperties:function(a){var b={},f={},c={},d={},e=0;switch(this._getAnimType()){case "showHide":var g=0;d.opacity=0;break;case "fadeInOut":d.opacity=0;break;case "slideLeft":b.left=a.width();c.left=0;
d.left=-a.width();break;case "slideRight":b.left=-a.width();c.left=0;d.left=a.width();break;case "slideTop":b.top=a.height();c.top=0;d.top=-a.height();break;case "slideBottom":b.top=-a.height();c.top=0;d.top=a.height();break;case "rotateLeft":g=this.options.animSpeed/2;b.transform="rotateY(90deg)";c.transform="rotateY(0deg)";e=g;d.transform="rotateY(-90deg)";break;case "rotateRight":g=this.options.animSpeed/2;b.transform="rotateY(-90deg)";c.transform="rotateY(0deg)";e=g;d.transform="rotateY(90deg)";
break;case "rotateTop":g=this.options.animSpeed/2;b.transform="rotateX(90deg)";c.transform="rotateX(0deg)";e=g;d.transform="rotateX(-90deg)";break;case "rotateBottom":g=this.options.animSpeed/2;b.transform="rotateX(-90deg)";c.transform="rotateX(0deg)";e=g;d.transform="rotateX(90deg)";break;case "scale":g=this.options.animSpeed/2;b.transform="scale(0)";f.transform="scale(1)";c.transform="scale(1)";e=g;d.transform="scale(0)";break;case "rotateLeftScale":f.transform="scale(1)";g=this.options.animSpeed/
2;b.transform="scale(0.3) rotateY(90deg)";c.transform="scale(1) rotateY(0deg)";e=g;d.transform="scale(0.3) rotateY(-90deg)";break;case "rotateRightScale":f.transform="scale(1)";g=this.options.animSpeed/2;b.transform="scale(0.3) rotateY(-90deg)";c.transform="scale(1) rotateY(0deg)";e=g;d.transform="scale(0.3) rotateY(90deg)";break;case "rotateTopScale":f.transform="scale(1)";g=this.options.animSpeed/2;b.transform="scale(0.3) rotateX(90deg)";c.transform="scale(1) rotateX(0deg)";e=g;d.transform="scale(0.3) rotateX(-90deg)";
break;case "rotateBottomScale":f.transform="scale(1)";g=this.options.animSpeed/2;b.transform="scale(0.3) rotateX(-90deg)";c.transform="scale(1) rotateX(0deg)";e=g;d.transform="scale(0.3) rotateX(90deg)";break;case "rotate3d":g=this.options.animSpeed/2,b.transform="rotate3d( 1, 1, 0, 90deg )",c.transform="rotate3d( 1, 1, 0, 0deg )",e=g,d.transform="rotate3d( 1, 1, 0, -90deg )"}return{startInProp:b,startOutProp:f,endInProp:c,endOutProp:d,delay:e,animSpeed:g!=t?g:this.options.animSpeed}},_showNext:function(a){var b=
this;clearTimeout(this.playtimeout);this.playtimeout=setTimeout(function(){var a=b.options.step,c=b.options.maxStep;c>b.showTotal&&(c=b.showTotal);for(var a="random"===a?Math.floor(Math.random()*c+1):Math.min(Math.abs(a),c),c=b._getRandom(a,b.showTotal),d=0;d<a;++d){var e=b.$items.eq(c[d]);if(e.data("active")||e.data("nochange"))return b._showNext(1),!1;b._replace(e)}b._showNext()},a||Math.max(Math.abs(this.options.interval),300))},_replace:function(a){a.data("active",!0);var b=this,f=a.children("a:last"),
c={width:f.width(),height:f.height(),border:this.margin+"px solid white"};a.data("active",!0);var d=this.outItems.shift();this.outItems.push(f.clone().css("transition","none"));d.css(c).prependTo(a);var e=this._getAnimProperties(f);d.css(e.startInProp);f.css(e.startOutProp);this._setTransition(d,"all",e.animSpeed,e.delay,this.options.animEasingIn);this._setTransition(f,"all",e.animSpeed,0,this.options.animEasingOut);this._applyTransition(d,e.endInProp,e.animSpeed,function(){var a=h(this),c=e.animSpeed===
b.options.animSpeed&&0===Object.keys(e.endInProp).length?e.animSpeed:0;setTimeout(function(){b.supportTransitions&&a.off(b.transEndEventName);a.next().remove();a.parent().data("active",!1)},c)},0===e.animSpeed||0===Object.keys(e.endInProp).length);this._applyTransition(f,e.endOutProp,e.animSpeed);a=d.attr("data-video");d.attr("style");"yes"===a&&(d.parent().css("background-image","url("+GridRotator.pluginsUrl+"/enjoy-instagram-premium/icons/play_overlay.png)"),d.parent().css("background-size","cover"),
d.css("opacity","0.45"))},_getRandom:function(a,b){for(var f=[],c=0;c<b;++c)f.push(c);return f.shuffle().slice(0,a)},_setTransition:function(a,b,f,c,d){setTimeout(function(){a.css("transition",b+" "+f+"ms "+c+"ms "+d)},25)},_applyTransition:function(a,b,f,c,d){var e=this;setTimeout(function(){h.fn.applyStyle=e.supportTransitions?h.fn.css:h.fn.animate;c&&e.supportTransitions&&(a.on(e.transEndEventName,c),d&&c.call(a));c=c||function(){return!1};a.stop().applyStyle(b,h.extend(!0,[],{duration:f+"ms",
complete:c}))},25)}};h.fn.gridrotator=function(a){var b=h.data(this,"gridrotator");if("string"===typeof a){var f=Array.prototype.slice.call(arguments,1);this.each(function(){b?h.isFunction(b[a])&&"_"!==a.charAt(0)?b[a].apply(b,f):l.console&&l.console.error("no such method '"+a+"' for gridrotator instance"):l.console&&l.console.error("cannot call methods on gridrotator prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){b?b._init():b=h.data(this,"gridrotator",new h.GridRotator(a,
this))});return b}})(jQuery,window);
